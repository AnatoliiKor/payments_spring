<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head th:insert="~{fragments/header :: head}"/>

<body class="admin">

<div th:insert="~{fragments/header :: navbar}"></div>
<div th:insert="~{fragments/messages :: messages}"></div>

<div class="container mt-5">
    <h3 th:text="#{to_do}"></h3><br/>
    <div th:if="${requests != null and not #lists.isEmpty(requests)}">
    <table class="table table-striped auto__table table-condensed text-center">
        <thead>
        <tr>
<!--            <th>#</th>-->
            <th th:text="#{number}"><</th>
            <th th:text="#{balance}"><</th>
            <th th:text="#{currency}"><</th>
            <th th:text="#{opened}"><</th>
            <th th:text="#{is_active}"><</th>
            <th></th>
            <th></th>
            <th></th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="request : ${requests}">
            <td th:text="${request.account.id}"></td>
            <td th:text="${request.account.balance/100}"></td>
            <td th:text="${request.account.currency}"></td>
            <td th:text="${T(com.kor.payments.domain.Utils).getFormatedDate(request.account.registered)}"></td>
            <td th:text="${request.account.active}? #{is_active} : #{blocked}"></td>
            <td>
                <form th:action="@{/admin/action/{path}(path=${request.account.id})}" method="post">
                    <div th:if="${request.action.name().equals('BLOCK')}">
                        <input type="hidden" name="is_active" value="false"/>
                        <button class="btn btn-outline-danger mt-2"
                                type="submit" th:text="#{block}"></button>
                    </div>
                    <div th:if="${request.action.name().equals('UNBLOCK')}">
                        <input type="hidden" name="is_active" value="true"/>
                        <button class="btn btn-outline-success mt-2"
                                type="submit" th:text="#{unblock}"></button>
                    </div>
                </form>
            </td>
        </tr>
        </tbody>
    </table>
    </div>
    <h2 th:if="${requests == null or #lists.isEmpty(requests)}" th:text="#{no_accounts} + ' ' + #{to_do}"></h2>
</div>
</body>
</html>